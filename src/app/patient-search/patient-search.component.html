<div *ngIf="loading" class="spinner-container">
    <mat-progress-spinner
      mode="indeterminate"
      diameter="50">
    </mat-progress-spinner>
  </div>
<div class="search-container">
    <mat-form-field>
      <mat-label>Search Patient by ID</mat-label>
      <input matInput [(ngModel)]="searchText" (input)="applyFilter()" placeholder="Enter Patient ID">
    </mat-form-field>
    <button mat-raised-button color="primary" (click)="searchPatient()">Search</button>
  </div>
  <div *ngIf="!loading">
    
  <table mat-table [dataSource]= "filteredPatients" class="mat-elevation-z8">
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef>
        <mat-checkbox (change)="selectAll($event)"></mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let patient">
        <mat-checkbox [(ngModel)]="patient.selected"></mat-checkbox>
      </td>
    </ng-container>
  
    <ng-container matColumnDef="patientId">
      <th mat-header-cell *matHeaderCellDef> Patient ID </th>
      <td mat-cell *matCellDef="let patient"> {{patient.patientId}} </td>
    </ng-container>
  
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Name </th>
      <td mat-cell *matCellDef="let patient"> {{patient.name}} </td>
    </ng-container>
  
    <ng-container matColumnDef="dob">
      <th mat-header-cell *matHeaderCellDef> Date of Birth </th>
      <td mat-cell *matCellDef="let patient"> {{patient.dob}} </td>
    </ng-container>
  
    <ng-container matColumnDef="medicalConditions">
      <th mat-header-cell *matHeaderCellDef> Medical Conditions </th>
      <td mat-cell *matCellDef="let patient"> {{patient.medicalConditions}} </td>
    </ng-container>
    
  
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef> Actions </th>
      <td mat-cell *matCellDef="let patient">
        <button mat-raised-button (click)="goToNext(patient)">Next</button>
      </td>
    </ng-container>
  
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>